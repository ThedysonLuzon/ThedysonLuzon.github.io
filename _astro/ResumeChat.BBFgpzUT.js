import{j as t}from"./jsx-runtime.D_zvdyIk.js";import{r}from"./index.RH_Wq4ov.js";const S="https://resume-chat-api.vercel.app/api/resume-chat";function i(){return Math.random().toString(36).slice(2)+Date.now().toString(36)}function E(){const[c,l]=r.useState(!1),[h,o]=r.useState([{id:i(),role:"assistant",text:"Hi! Ask about Thedysonâ€™s projects, stack, or experience."}]),[g,m]=r.useState(""),[u,d]=r.useState(!1),p=r.useRef(null),x=r.useRef(null);r.useEffect(()=>{c&&setTimeout(()=>x.current?.focus(),80)},[c]),r.useEffect(()=>{p.current?.scrollTo({top:p.current.scrollHeight,behavior:"smooth"})},[h,c]),r.useEffect(()=>{const s=e=>{e.key==="Escape"&&c&&l(!1),(e.ctrlKey||e.metaKey)&&e.key.toLowerCase()==="k"&&(e.preventDefault(),l(a=>!a))};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[c]),r.useEffect(()=>{const s=()=>l(!0);return window.addEventListener("resumechat:open",s),()=>window.removeEventListener("resumechat:open",s)},[]);function j(){return["Hereâ€™s a quick snapshot of my core skills:","","â€¢ AI / ML: Python, PyTorch, TensorFlow, scikit-learn, OpenCV, YOLOv8, autoencoders, data preprocessing & augmentation","â€¢ MLOps: DVC (data/versioning), MLflow (experiments/lineage), BentoML (packaging), FastAPI (serving), Docker, Kubernetes","â€¢ Realtime / CV: multi-stream ingest, RTSP watchdog, adaptive micro-batching, quantization","â€¢ Backend: TypeScript/Node.js, Express, GraphQL APIs","â€¢ Frontend: React + TypeScript, Astro, modern UI patterns","â€¢ Data / DB: MongoDB, PostgreSQL, indexed queries/aggregations","â€¢ Cloud / DevOps: GitHub Actions (CI/CD), NGINX, Azure & AWS basics"].join(`
`)}function b(){return["Stack overview:","","â€¢ Languages: Python, TypeScript","â€¢ ML: PyTorch, TensorFlow, scikit-learn, OpenCV, YOLOv8","â€¢ Serving: FastAPI, BentoML","â€¢ Experimentation: MLflow (metrics, params, artifacts)","â€¢ Data & Versioning: DVC","â€¢ Infra: Docker, Kubernetes, NGINX","â€¢ Web: React, Astro","â€¢ DB: MongoDB, PostgreSQL","â€¢ CI/CD: GitHub Actions","â€¢ Cloud: Azure + AWS basics"].join(`
`)}function N(){return["You can reach me here:","","â€¢ Email: luzon.thedyson@gmail.com","â€¢ LinkedIn: https://www.linkedin.com/in/thedysonluzon/","â€¢ GitHub:  https://github.com/ThedysonLuzon","","Need a resume copy? Email me and Iâ€™ll send the latest PDF."].join(`
`)}function C(s){return s.trim().startsWith("/")}async function k(s){const e=s.trim().toLowerCase();return e==="/skills"?(o(a=>[...a,{id:i(),role:"assistant",text:j()}]),!0):e==="/stack"?(o(a=>[...a,{id:i(),role:"assistant",text:b()}]),!0):e==="/contact"?(o(a=>[...a,{id:i(),role:"assistant",text:N()}]),!0):!1}async function y(s){const e=await fetch(S,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({question:s,history:h.slice(-8)})});if(!e.ok){const a=await e.text().catch(()=>"");throw new Error(`Chat error ${e.status}: ${a||e.statusText}`)}return await e.json()}const w=async()=>{const s=g.trim();if(!(!s||u)){m(""),o(e=>[...e,{id:i(),role:"user",text:s}]),d(!0);try{if(C(s)&&await k(s))return;const e=await y(s),a=Array.isArray(e.sources)&&e.sources.length?`

Sources: ${e.sources.slice(0,3).map(n=>n.title||n.url).join(" â€¢ ")}`:"";o(n=>[...n,{id:i(),role:"assistant",text:(e.answer||"No answer.")+a}])}catch(e){o(a=>[...a,{id:i(),role:"assistant",text:`Oopsâ€”${e?.message||"something went wrong."}`}])}finally{d(!1)}}},v=s=>{s.key==="Enter"&&!s.shiftKey&&(s.preventDefault(),w())},f=async s=>{if(!u){m(""),o(e=>[...e,{id:i(),role:"user",text:s}]),d(!0);try{if(await k(s))return;const e=await y(s),a=Array.isArray(e.sources)&&e.sources.length?`

Sources: ${e.sources.slice(0,3).map(n=>n.title||n.url).join(" â€¢ ")}`:"";o(n=>[...n,{id:i(),role:"assistant",text:(e.answer||"No answer.")+a}])}catch(e){o(a=>[...a,{id:i(),role:"assistant",text:`Oopsâ€”${e?.message||"something went wrong."}`}])}finally{d(!1)}}};return t.jsxs(t.Fragment,{children:[t.jsxs("button",{className:"chat-fab","aria-haspopup":"dialog","aria-expanded":c,"aria-controls":"resume-chat-panel",onClick:()=>l(!0),children:[t.jsx("span",{className:"fab-core","aria-hidden":"true",children:"ðŸ¤–"}),t.jsx("span",{className:"fab-label",children:"Chat"})]}),t.jsx("div",{className:`chat-scrim ${c?"open":""}`,role:"presentation",onClick:()=>l(!1)}),t.jsxs("section",{id:"resume-chat-panel",role:"dialog","aria-modal":"true","aria-label":"Resume Chat",className:`chat-panel ${c?"open":""}`,children:[t.jsxs("header",{className:"chat-header",children:[t.jsxs("div",{className:"chat-title",children:[t.jsx("span",{className:"dot"})," Ask my Resume"]}),t.jsx("div",{className:"chat-actions",children:t.jsx("button",{className:"hd-btn",onClick:()=>l(!1),"aria-label":"Close",children:"âœ•"})})]}),t.jsxs("div",{className:"chat-body",ref:p,children:[h.map(s=>t.jsx("div",{className:`msg ${s.role}`,children:t.jsx("div",{className:"bubble",children:s.text})},s.id)),u&&t.jsx("div",{className:"msg assistant",children:t.jsxs("div",{className:"bubble typing",children:[t.jsx("span",{className:"tick"}),t.jsx("span",{className:"tick"}),t.jsx("span",{className:"tick"})]})})]}),t.jsxs("div",{className:"chat-chips",role:"list","aria-label":"Quick commands",children:[t.jsx("button",{role:"listitem",className:"chip",onClick:()=>f("/skills"),children:"/skills"}),t.jsx("button",{role:"listitem",className:"chip",onClick:()=>f("/stack"),children:"/stack"}),t.jsx("button",{role:"listitem",className:"chip",onClick:()=>f("/contact"),children:"/contact"})]}),t.jsxs("footer",{className:"chat-input",children:[t.jsx("input",{ref:x,value:g,onChange:s=>m(s.target.value),onKeyDown:v,placeholder:"Type a messageâ€¦ try /skills, /stack, /contact","aria-label":"Message"}),t.jsx("button",{className:"send",onClick:w,disabled:u,children:"Send"})]})]})]})}export{E as default};

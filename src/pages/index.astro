---
import HeroIntro from "../components/HeroIntro.astro";
import ProjectCard from "../components/ProjectCard.astro";
import GitHubShowcase from "../components/GitHubShowcase.astro";
import CoreStack from "../components/CoreStack.astro";
import Footer from "../components/Footer.astro";
import Header from "../components/Header.astro";
import "../styles/theme.css";
import { getCollection } from "astro:content";

const projects = [
  {
    title: "SafeRoomAI",
    summary:
      "Real-time anomaly detection (YOLO + Autoencoder fallback) with reproducible pipeline.",
    stack: ["Python", "YOLOv8", "Autoencoder", "DVC", "MLflow", "BentoML", "K8s", "FastAPI"],
    highlights: [
      "Adaptive micro-batching & quantization",
      "Experiment lineage (DVC + MLflow)",
      "RTSP watchdog fallback to cached video",
    ],
    repo: "https://github.com/DC-Capstone1W25/SafeRoomAI",
    caseStudy: "/projects/saferoomai",
  },
  {
    title: "GreenEarthConnect",
    summary:
      "Sustainability analytics & community engagement platform for tracking eco-impact and fostering local environmental initiatives.",
    stack: ["TypeScript", "React", "Node.js", "Express", "GraphQL", "MongoDB", "Docker", "CI"],
    highlights: [
      "Modular service layer with typed GraphQL schema & strict lint gates",
      "Real-time contribution feed (websocket / subscription ready design)",
      "Optimized aggregations & indexed queries for activity / impact metrics",
    ],
    repo: "https://github.com/DC-Capstone1W25/greenearthconnect",
    caseStudy: "/projects/greenearthconnect",
  },
];

const posts = await getCollection("blog");
posts.sort(
  (a, b) =>
    new Date(b.data.pubDate).getTime() - new Date(a.data.pubDate).getTime()
);
const latest = posts[0];
---
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Thedyson Luzon – AI & MLOps Engineer</title>
    <meta
      name="description"
      content="AI & MLOps Engineer delivering real-time computer vision, reproducible ML pipelines, and cloud-native full-stack solutions."
    />
    <meta name="author" content="Thedyson Eduard Luzon" />
    <link rel="canonical" href="https://thedysonluzon.github.io/" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta property="og:title" content="Thedyson Luzon – AI & MLOps Engineer" />
    <meta
      property="og:description"
      content="Real-Time CV • Reproducible ML • Cloud-Native Full-Stack"
    />
    <meta property="og:image" content="/og-default.png" />
    <meta name="twitter:card" content="summary_large_image" />

    <!-- theme init -->
    <script>
      (function () {
        const stored = localStorage.getItem("theme");
        const prefersLight = window
          .matchMedia("(prefers-color-scheme: light)")
          .matches;
        document.documentElement.dataset.theme =
          stored || (prefersLight ? "light" : "dark");
      })();
    </script>
  </head>
  <body>
    <a href="#main" class="skip-link">Skip to content</a>

    <Header />

    <main id="main" class="main-container">
      <HeroIntro />

      <section id="value-mission" class="profile-sections">
        <div class="profile-block" aria-labelledby="mission-title">
          <h2 id="mission-title">Mission</h2>
          <p>
            Build trustworthy, observable AI & full-stack platforms—from
            ingestion & continual training to container/K8s deployment and user
            dashboards—optimizing for repeatable delivery, low operational
            overhead, and business-aligned outcomes.
          </p>
        </div>

        <div class="profile-block" aria-labelledby="edu-title">
          <h2 id="edu-title">Education</h2>
          <ul class="edu-list">
            <li><strong>Software Engineering Technology</strong> — Completed</li>
            <li>
              <strong>AI Design, Analysis & Implementation (Co-op)</strong> —
              In Progress<br />
              Capstone: <em>SafeRoomAI</em> (multi-stream anomaly detection +
              full MLOps lifecycle)
            </li>
          </ul>
        </div>
      </section>

      <CoreStack />

      <section id="projects" class="section">
        <h2>Highlighted Projects</h2>
        <div class="projects-grid">
          {projects.map((p) => (
            <ProjectCard {...p} />
          ))}
        </div>
      </section>

      <GitHubShowcase />

      <section id="blog" class="section">
        <h2>Latest Article</h2>
        <p class="lead">
          <a href={`/blog/${latest.id}`} class="post-link">
            {latest.data.title} →
          </a>
        </p>
      </section>

      <section id="contact" class="section">
        <h2>Contact</h2>
        <p>
          If you're exploring candidates for AI, MLOps or full-stack roles, I’d
          be happy to discuss how I can help your team ship reliable ML
          products.
        </p>
        <p>
          <a
            class="btn primary"
            href="mailto:luzon.thedyson@gmail.com?subject=Interest%20in%20AI%20%2F%20MLOps%20Role"
          >
            Email Me (Request Resume)
          </a>
        </p>
        <p class="contact-links">
          <a href="mailto:luzon.thedyson@gmail.com">Email</a>
          <span aria-hidden="true">·</span>
          <a
            href="https://www.linkedin.com/in/thedysonluzon/"
            target="_blank"
            rel="noopener"
            >LinkedIn</a
          >
          <span aria-hidden="true">·</span>
          <a
            href="https://github.com/ThedysonLuzon"
            target="_blank"
            rel="noopener"
            >GitHub</a
          >
        </p>
        <p class="resume-note">
          * Full resume supplied on request to protect distribution.
        </p>
      </section>
    </main>

    <Footer />

    <!-- theme toggle -->
    <script>
      const t = document.getElementById("theme-toggle");
      t?.addEventListener("click", () => {
        const root = document.documentElement;
        const next = root.dataset.theme === "light" ? "dark" : "light";
        root.dataset.theme = next;
        localStorage.setItem("theme", next);
      });
    </script>
  </body>
</html>

---
import '../styles/theme.css';
import HeaderLink from './HeaderLink.astro';
---
<header class="site-header" role="banner">
  <nav class="top-nav" aria-label="Primary">
    <a href="/" class="brand">TL</a>
    <ul class="nav-links">
      <li><HeaderLink href="/#value-mission" class="btn">Mission</HeaderLink></li>
      <li><HeaderLink href="/#core-stack"   class="btn">Stack</HeaderLink></li>
      <li><HeaderLink href="/#projects"     class="btn">Projects</HeaderLink></li>
      <li><HeaderLink href="/blog"          class="btn">Blog</HeaderLink></li>
      <li><HeaderLink href="/about"         class="btn">About</HeaderLink></li>
      <li><HeaderLink href="/#contact"      class="btn primary">Hire Me</HeaderLink></li>
      <li>
        <button
          id="theme-toggle"
          aria-label="Toggle theme"
          type="button"
        >ðŸŒ“</button>
      </li>
    </ul>
  </nav>
</header>

<style>
  .site-header {
    position: sticky;
    top: 0;
    z-index: 1000;
    backdrop-filter: blur(10px);
    background: rgba(15,17,23,0.6);
    border-bottom: 1px solid var(--color-border);
  }
  :root[data-theme='light'] .site-header {
    background: rgba(255,255,255,0.75);
  }
  .top-nav {
    display: flex;
    align-items: center;
    justify-content: space-between;
    max-width: 1180px;
    margin: 0 auto;
    padding: 0.55rem 1rem;
  }
  .brand {
    font-size: 1.05rem;
    font-weight: 600;
    letter-spacing: 0.6px;
    text-decoration: none;
    color: var(--color-text);
    transition: color var(--transition);
  }
  .brand:hover {
    color: var(--color-accent);
  }
  .nav-links {
    list-style: none;
    margin: 0;
    padding: 0;
    display: flex;
    gap: 0.75rem;
    align-items: center;
  }
  #theme-toggle {
    background: var(--color-surface);
    color: var(--color-text);
    border: 1px solid var(--color-border);
    padding: 0.45rem 0.65rem;
    border-radius: 8px;
    cursor: pointer;
    font-size: 0.85rem;
    transition: var(--transition);
  }
  #theme-toggle:hover,
  #theme-toggle:focus-visible {
    color: var(--color-accent);
  }
</style>

<script client:idle>
  const btn = document.getElementById('theme-toggle');
  btn?.addEventListener('click', () => {
    const root = document.documentElement;
    const next = root.dataset.theme === 'light' ? 'dark' : 'light';
    root.dataset.theme = next;
    localStorage.setItem('theme', next);
  });
</script>
